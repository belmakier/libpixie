\hypertarget{reader_8cc_source}{}\doxysection{reader.\+cc}
\label{reader_8cc_source}\index{src/reader.cc@{src/reader.cc}}
\mbox{\hyperlink{reader_8cc}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00001}00001 \textcolor{comment}{/* libpixie reader */}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00003}00003 \textcolor{preprocessor}{\#include <sstream>}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00004}00004 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00005}00005 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00006}00006 \textcolor{preprocessor}{\#include <cstdio>}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00007}00007 \textcolor{preprocessor}{\#include <cstring>}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00008}00008 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00009}00009 \textcolor{preprocessor}{\#include <sys/stat.h>}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00010}00010 \textcolor{preprocessor}{\#include <unistd.h>}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00012}00012 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{experiment__definition_8hh}{experiment\_definition.hh}}"{}}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00013}00013 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{reader_8hh}{reader.hh}}"{}}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00014}00014 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{colors_8hh}{colors.hh}}"{}}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00016}00016 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_p_i_x_i_e}{PIXIE}}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00017}00017 \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00018}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0bed6c777200e6d0b818c1ead0dea7e8}{00018}}   \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0bed6c777200e6d0b818c1ead0dea7e8}{Reader::Reader}}()}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00019}00019     : file(nullptr)}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00020}00020   \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00021}00021     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a4e64aae95c6689ee7770ff98de8900e1}{pileups}}      = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00023}00023     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a75d5430b30747d8a8f4e2650d836b711}{sameChanPU}}   = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00024}00024     }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00025}00025     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[0]     = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00026}00026     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[1]     = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00027}00027     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[2]     = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00028}00028     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[3]     = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00030}00030     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ae24f10cc7434b83d1d87892733debda8}{badcfd}}       = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00031}00031     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac743b3c98720b153ab06f1e17223f6ec}{outofrange}}   = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00032}00032     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0ce86f5114467a18c6e22f7115f00fec}{subevents}}    = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00033}00033     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac0f5d35b39294a8597812b9e4c574ad5}{nEvents}}      = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00035}00035     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_abd5a8a855c9fbbe15a7d551c5a7583c8}{liveSort}}     = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00037}00037     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a838f7fc1f5b7db72f9eafa3c2ee55d49}{fileLength}}   = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00038}00038     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a3cbf44c09c0127d4049eae7d04109084}{fileSize}} = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00039}00039     }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00040}00040     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a9e1ef7766d3ee935ff0b384d52d6a87c}{end}}          = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00042}00042     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a3e66bd0a75873843da872d57015733f7}{max\_offset}}   = -\/1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00043}00043     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac7ddadef511f84bea18e6a287cdb38e0}{start\_offset}} = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00045}00045     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ae95c4e93a4bd8b7fec5cfc454fd7c94d}{thread}}       = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00047}00047     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_aed38c96580fe22467fd7ac3d49275239}{eventCtr}} = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00048}00048     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_afd0eac4d82f9cd89651280c4bc637e33}{measCtr}} = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00050}00050     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a1bca2a0a2ef65c46e65a7ff932a18c2d}{warnings}} = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00051}00051     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a046891d103ef8746fc15a621676b81cd}{RejectSCPU}} = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00052}00052   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00053}00053   }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00054}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a05785721ce83b53a10daba9b3b82cda9}{00054}}   \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a05785721ce83b53a10daba9b3b82cda9}{Reader::\string~Reader}}() \{\}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00056}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a58b8de6c0c1eddb1befb9898b6e335e6}{00056}}   off\_t \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a58b8de6c0c1eddb1befb9898b6e335e6}{Reader::offset}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00057}00057     \textcolor{keywordflow}{return} (ftello(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}));}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00058}00058   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00060}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ad897e69d49ff92db19104b099665c78f}{00060}}   off\_t \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ad897e69d49ff92db19104b099665c78f}{Reader::set\_offset}}(off\_t s\_offset) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00061}00061     fseek(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}, s\_offset, SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00062}00062     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac7ddadef511f84bea18e6a287cdb38e0}{start\_offset}} = s\_offset;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00063}00063     \textcolor{keywordflow}{return} s\_offset;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00064}00064   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00066}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a796047efa6b51174af849a2f92d69518}{00066}}   off\_t \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a796047efa6b51174af849a2f92d69518}{Reader::update\_filesize}}() \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00067}00067     \textcolor{keyword}{struct }stat stat;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00068}00068     \textcolor{keywordflow}{if} (fstat(fileno(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}), \&stat) != 0) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00069}00069       std::cout << \textcolor{stringliteral}{"{}Couldn't stat"{}} << std::endl;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00070}00070     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00072}00072     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a838f7fc1f5b7db72f9eafa3c2ee55d49}{fileLength}} = stat.st\_size;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00073}00073     \textcolor{keywordflow}{return}(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a838f7fc1f5b7db72f9eafa3c2ee55d49}{fileLength}});    }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00074}00074   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00077}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a92b3992329a0b61e02f5d5e73a8cac18}{00077}}   \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a92b3992329a0b61e02f5d5e73a8cac18}{Reader::check\_pos}}() \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00078}00078     \textcolor{keywordflow}{return}(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a58b8de6c0c1eddb1befb9898b6e335e6}{offset}}() >= this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a796047efa6b51174af849a2f92d69518}{update\_filesize}}());}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00079}00079   \}    }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00080}00080   }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00081}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a9290c324fdbec0c231d1f4dbc34dd402}{00081}}   \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a9290c324fdbec0c231d1f4dbc34dd402}{Reader::eof}}() \{    }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00082}00082     assert(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00084}00084     \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_abd5a8a855c9fbbe15a7d551c5a7583c8}{liveSort}}) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00085}00085       \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a58b8de6c0c1eddb1befb9898b6e335e6}{offset}}()>this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a796047efa6b51174af849a2f92d69518}{update\_filesize}}()) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00086}00086         std::cout<< this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a58b8de6c0c1eddb1befb9898b6e335e6}{offset}}() << \textcolor{stringliteral}{"{} "{}} << this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a838f7fc1f5b7db72f9eafa3c2ee55d49}{fileLength}} << std::endl;;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00087}00087       \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00088}00088     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00089}00089     assert(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a58b8de6c0c1eddb1befb9898b6e335e6}{offset}}() <= this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a838f7fc1f5b7db72f9eafa3c2ee55d49}{fileLength}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00090}00090 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00091}00091     \textcolor{keywordflow}{return}(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a58b8de6c0c1eddb1befb9898b6e335e6}{offset}}() == this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a838f7fc1f5b7db72f9eafa3c2ee55d49}{fileLength}} || std::feof(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}) );}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00092}00092   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00094}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a2b620bd53cc95def1ff061026b0c9c25}{00094}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a2b620bd53cc95def1ff061026b0c9c25}{Reader::printUpdate}}() \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00095}00095     time\_t now;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00096}00096     time(\&now);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00097}00097     \textcolor{keywordtype}{float} perc\_complete;    }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00098}00098     \textcolor{keywordtype}{float} size\_to\_sort = 1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00099}00099 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00100}00100     \textcolor{keywordflow}{if} (now==\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a8bbac18262af021f9b44e6b6af252e64}{starttime}}) \{ \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00101}00101     }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00102}00102     perc\_complete = 100.0*(float)((\textcolor{keywordtype}{float})ftell(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}))/\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a3cbf44c09c0127d4049eae7d04109084}{fileSize}};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00103}00103     printf(\textcolor{stringliteral}{"{}\(\backslash\)r[ \%i ] Pixie Processing ["{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%.1f\%\%"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}], elapsed time "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%ld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{} s, "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%llu"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{} events per s"{}},this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ae95c4e93a4bd8b7fec5cfc454fd7c94d}{thread}}, (perc\_complete), now-\/\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a8bbac18262af021f9b44e6b6af252e64}{starttime}}, this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac0f5d35b39294a8597812b9e4c574ad5}{nEvents}}/(now-\/\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a8bbac18262af021f9b44e6b6af252e64}{starttime}}));}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00104}00104     std::cout<<std::flush;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00105}00105   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00106}00106 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00107}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a071bfe4a4c85addb5506826a30199a97}{00107}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a071bfe4a4c85addb5506826a30199a97}{Reader::printSummary}}() \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00108}00108     printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00109}00109     printf(\textcolor{stringliteral}{"{}Average event length:     "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%6.5f us\(\backslash\)n"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ad84d4070b4658e152083ff76f9f1cba4}{av\_evt\_length}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00110}00110     printf(\textcolor{stringliteral}{"{}Total sub-\/events:     "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld\(\backslash\)n"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0ce86f5114467a18c6e22f7115f00fec}{subevents}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00111}00111     printf(\textcolor{stringliteral}{"{}Bad CFD sub-\/events:   "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{},     "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%5.1f\%\% "{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}good\(\backslash\)n"{}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ae24f10cc7434b83d1d87892733debda8}{badcfd}}, 100*(1-\/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ae24f10cc7434b83d1d87892733debda8}{badcfd}}/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0ce86f5114467a18c6e22f7115f00fec}{subevents}}));}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00112}00112     printf(\textcolor{stringliteral}{"{}Pileups:              "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{},     "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%5.1f\%\% "{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}good\(\backslash\)n"{}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a4e64aae95c6689ee7770ff98de8900e1}{pileups}}, 100*(1-\/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a4e64aae95c6689ee7770ff98de8900e1}{pileups}}/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0ce86f5114467a18c6e22f7115f00fec}{subevents}}));}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00113}00113     printf(\textcolor{stringliteral}{"{}Same channel pileups: "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{},     "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%5.1f\%\% "{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}good\(\backslash\)n"{}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a75d5430b30747d8a8f4e2650d836b711}{sameChanPU}}, 100*(1-\/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a75d5430b30747d8a8f4e2650d836b711}{sameChanPU}}/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0ce86f5114467a18c6e22f7115f00fec}{subevents}}));}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00114}00114     printf(\textcolor{stringliteral}{"{}Out of range:         "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{},     "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%5.1f\%\% "{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}good\(\backslash\)n"{}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac743b3c98720b153ab06f1e17223f6ec}{outofrange}}, 100*(1-\/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac743b3c98720b153ab06f1e17223f6ec}{outofrange}}/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0ce86f5114467a18c6e22f7115f00fec}{subevents}}));}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00115}00115     printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00116}00116     printf(\textcolor{stringliteral}{"{}Singles:              "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{},     "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%5.1f\%\% "{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}\(\backslash\)n"{}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[0], 100*(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[0]/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac0f5d35b39294a8597812b9e4c574ad5}{nEvents}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00117}00117     printf(\textcolor{stringliteral}{"{}Doubles:              "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{},     "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%5.1f\%\% "{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}\(\backslash\)n"{}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[1], 100*(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[1]/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac0f5d35b39294a8597812b9e4c574ad5}{nEvents}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00118}00118     printf(\textcolor{stringliteral}{"{}Triples:              "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{},     "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%5.1f\%\% "{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}\(\backslash\)n"{}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[2], 100*(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[2]/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac0f5d35b39294a8597812b9e4c574ad5}{nEvents}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00119}00119     printf(\textcolor{stringliteral}{"{}Quadruples:           "{}} \mbox{\hyperlink{colors_8hh_a5a123b382640b3aa65dd5db386002fbc}{ANSI\_COLOR\_YELLOW}} \textcolor{stringliteral}{"{}\%15lld"{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{},     "{}} \mbox{\hyperlink{colors_8hh_a966c72d8d733c7734c6c784753d894c7}{ANSI\_COLOR\_GREEN}} \textcolor{stringliteral}{"{}\%5.1f\%\% "{}} \mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}} \textcolor{stringliteral}{"{}\(\backslash\)n"{}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[3], 100*(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[3]/(\textcolor{keywordtype}{double})\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac0f5d35b39294a8597812b9e4c574ad5}{nEvents}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00120}00120 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00121}00121   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00122}00122     }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00123}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a4a55641e5cd36c07ea13fbbdf69d1573}{00123}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a4a55641e5cd36c07ea13fbbdf69d1573}{Reader::open}}(\textcolor{keyword}{const} std::string \&path) \{    }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00124}00124     \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00125}00125       \textcolor{keywordflow}{return} (-\/1); \textcolor{comment}{//file has already been opened}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00126}00126     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00128}00128     \textcolor{keywordflow}{if} (!(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}} = fopen(path.c\_str(), \textcolor{stringliteral}{"{}rb"{}}))) \{      }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00129}00129       \textcolor{keywordflow}{return} (-\/1);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00130}00130     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00132}00132     fseek(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}, 0L, SEEK\_END);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00133}00133     \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a3cbf44c09c0127d4049eae7d04109084}{fileSize}} = ftell(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00134}00134     rewind(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00135}00135     }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00136}00136     \textcolor{keywordflow}{if} (this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_abd5a8a855c9fbbe15a7d551c5a7583c8}{liveSort}}) \{fseek(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}, 0, SEEK\_END); this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a9e1ef7766d3ee935ff0b384d52d6a87c}{end}} = \textcolor{keyword}{true}; usleep(1000000);\}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00138}00138     \textcolor{keywordflow}{return} (0);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00139}00139   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00140}00140 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00141}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a132af92b0da147eddd7db419d5d97229}{00141}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a132af92b0da147eddd7db419d5d97229}{Reader::read}}() \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00142}00142     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_aed38c96580fe22467fd7ac3d49275239}{eventCtr}} == \mbox{\hyperlink{definitions_8hh_ae42954bb8545d24e3e9dcde5920c9a0b}{MAX\_EVENTS}}) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00143}00143       \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_aed38c96580fe22467fd7ac3d49275239}{eventCtr}} = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00144}00144     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00145}00145     }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00146}00146     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a9e1ef7766d3ee935ff0b384d52d6a87c}{end}} = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00148}00148     \mbox{\hyperlink{class_p_i_x_i_e_1_1_event}{Event}} *\textcolor{keyword}{event} = \&(\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_acc83dbcc5e0677cf293a5f9b8c49f3bb}{events}}[\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_aed38c96580fe22467fd7ac3d49275239}{eventCtr}}]); \textcolor{comment}{//pointer to event}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00149}00149     \textcolor{keywordtype}{int} retval = \textcolor{keyword}{event}-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_event_a26b35f1babc2d2dc92db286381221229}{read}}(\textcolor{keyword}{this}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_afb6553488e3a40a7625f18fd68333407}{coincWindow}}, \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a1bca2a0a2ef65c46e65a7ff932a18c2d}{warnings}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00151}00151     \textcolor{keywordflow}{if} (retval == 0) \{\}  \textcolor{comment}{//successful read}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00152}00152     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (retval == -\/1) \{ \textcolor{comment}{//end of file }}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00153}00153       this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a9e1ef7766d3ee935ff0b384d52d6a87c}{end}} = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00154}00154       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00155}00155     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00156}00156     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (retval == 1) \{ \textcolor{comment}{//same channel pileup}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00157}00157       this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a75d5430b30747d8a8f4e2650d836b711}{sameChanPU}} += 1;                    }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00158}00158     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00159}00159         }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00160}00160     \textcolor{comment}{//increment counters}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00161}00161     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a4e64aae95c6689ee7770ff98de8900e1}{pileups}} += \textcolor{keyword}{event}-\/>pileups;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00162}00162     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ae24f10cc7434b83d1d87892733debda8}{badcfd}} += \textcolor{keyword}{event}-\/>badcfd;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00163}00163     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a0ce86f5114467a18c6e22f7115f00fec}{subevents}} += \textcolor{keyword}{event}-\/>nMeas;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00164}00164     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac0f5d35b39294a8597812b9e4c574ad5}{nEvents}} += 1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00165}00165     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ac743b3c98720b153ab06f1e17223f6ec}{outofrange}} += \textcolor{keyword}{event}-\/>outofrange;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00166}00166     \textcolor{keywordflow}{if} (event-\/>mult < 5) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00167}00167       this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_ab55f638b22423b50b5bb35c1cb926c15}{mults}}[\textcolor{keyword}{event}-\/>mult-\/1] += 1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00168}00168     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00169}00169 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00170}00170     ++\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_aed38c96580fe22467fd7ac3d49275239}{eventCtr}};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00172}00172     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00173}00173   \}\textcolor{comment}{//Reader::read}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00174}00174 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00175}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a512016b34f00641448198b3168868de0}{00175}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a512016b34f00641448198b3168868de0}{Reader::dump\_traces}}(\textcolor{keywordtype}{int} crate, \textcolor{keywordtype}{int} slot, \textcolor{keywordtype}{int} chan, std::string outPath, \textcolor{keywordtype}{int} maxTraces, \textcolor{keywordtype}{int} append, std::string traceName) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00176}00176     fpos\_t pos;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00177}00177     fgetpos(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}, \&pos);          }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00178}00178 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00179}00179     \textcolor{keywordtype}{int} retval=0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00180}00180 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00181}00181     \textcolor{comment}{//Determine the length of traces for the given channel/if there are traces for the given channel}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00182}00182     \textcolor{keywordtype}{int} traceLen = 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00183}00183     \textcolor{keywordflow}{while} (traceLen == 0)\{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00184}00184       \mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement}{PIXIE::Measurement}} meas;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00185}00185       \textcolor{keywordtype}{int} retval = meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_ae44119a232562550787b78263c87e819}{read\_header}}(\textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00186}00186       retval = meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_ab52c696179c4bb8c6447fe375f696c90}{read\_full}}(\textcolor{keyword}{this}, NULL);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00187}00187       \textcolor{keywordflow}{if} (retval<0)\{\textcolor{keywordflow}{break};\}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00188}00188       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_a7de1b2bfc4cb4f62d779fdb90bd241c5}{good\_trace}} || crate!=meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_ac1630da7899d358a7f6c06bbce3b6417}{crateID}} || slot!=meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_a5b5f3a4dea3cf357aaa82298af1ff1da}{slotID}} || chan!=meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_a25bffef52002e2135c60b185085c62b0}{channelNumber}})\{;\}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00189}00189       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00190}00190         traceLen = meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_adb93890ef91a35ac88c9e23f31af4b05}{traceLength}};        }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00191}00191       \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00192}00192     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00193}00193     \textcolor{keywordflow}{if}(traceLen == 0)\{printf(\textcolor{stringliteral}{"{}No traces for given channel\(\backslash\)n"{}});exit(1);\}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00194}00194 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00195}00195     fsetpos(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}, \&pos);  \textcolor{comment}{//we were never even here}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00196}00196     \textcolor{comment}{//Draw traces}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00197}00197     \textcolor{keywordtype}{double} superTrace[traceLen];\textcolor{comment}{//=\{0\};}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00198}00198 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00199}00199     \textcolor{keywordtype}{double} x[traceLen];\textcolor{comment}{//=\{0\};    }}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00200}00200     \textcolor{keywordtype}{int} nTraces=0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00201}00201     printf(\textcolor{stringliteral}{"{}Dumping \%d trace(s) from slot: \%d chan: \%d\(\backslash\)n"{}},maxTraces, slot, chan);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00202}00202     \textcolor{keywordflow}{while} (nTraces<maxTraces)\{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00203}00203       uint16\_t trace[traceLen];\textcolor{comment}{//=\{0\};}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00204}00204       \mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement}{PIXIE::Measurement}} meas;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00205}00205       \textcolor{keywordtype}{int} retval = meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_ae44119a232562550787b78263c87e819}{read\_header}}(\textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00206}00206       retval = meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_ab52c696179c4bb8c6447fe375f696c90}{read\_full}}(\textcolor{keyword}{this}, trace);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00207}00207       \textcolor{keywordflow}{if} (retval<0)\{\textcolor{keywordflow}{break};\}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00208}00208       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_a7de1b2bfc4cb4f62d779fdb90bd241c5}{good\_trace}} || crate!=meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_ac1630da7899d358a7f6c06bbce3b6417}{crateID}} || slot!=meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_a5b5f3a4dea3cf357aaa82298af1ff1da}{slotID}} || chan!=meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_a25bffef52002e2135c60b185085c62b0}{channelNumber}})\{;\}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00209}00209       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00210}00210         traceLen = meas.\mbox{\hyperlink{class_p_i_x_i_e_1_1_measurement_adb93890ef91a35ac88c9e23f31af4b05}{traceLength}};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00211}00211         this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_abb0fc6333195ac9dd12f7fea78834b0f}{definition}}.\mbox{\hyperlink{class_p_i_x_i_e_1_1_experiment___definition_a4dafec217c0b9f571c8cc9e944e3f050}{GetChannel}}(crate, slot, chan)-\/>\mbox{\hyperlink{struct_p_i_x_i_e_1_1_experiment___definition_1_1_channel_ab4bc7928648f3bd401ff1327e6b86f9e}{alg}}-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_trace_1_1_algorithm_a03f21dc897a2dcd2a2391964756c9737}{dumpTrace}}(\&trace[0], traceLen, nTraces, outPath, append, traceName);        }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00212}00212         nTraces+=1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00213}00213         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<traceLen;i++)\{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00214}00214           superTrace[i] = (double) ((superTrace[i]*(nTraces-\/1) +  trace[i])/nTraces);}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00215}00215         \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00216}00216       \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00217}00217     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00218}00218     uint16\_t tempTrace[traceLen];\textcolor{comment}{//=\{0\};}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00219}00219 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00220}00220     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<traceLen;i++)\{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00221}00221       tempTrace[i] = (uint16\_t) superTrace[i];}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00222}00222     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00223}00223     \textcolor{keywordflow}{if} (nTraces==0)\{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00224}00224       printf(\textcolor{stringliteral}{"{}\%s!!!Warning!!!  No traces saved\%s\(\backslash\)n"{}},\mbox{\hyperlink{colors_8hh_a34995b955465f6bbb37c359173d50477}{ANSI\_COLOR\_RED}},\mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00225}00225       retval = -\/1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00226}00226     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00227}00227     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00228}00228       \textcolor{keywordflow}{if} (nTraces<maxTraces)\{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00229}00229         printf(\textcolor{stringliteral}{"{}\%s!!!Warning!!!  Only \%d traces saved\%s\(\backslash\)n"{}},\mbox{\hyperlink{colors_8hh_a34995b955465f6bbb37c359173d50477}{ANSI\_COLOR\_RED}},nTraces,\mbox{\hyperlink{colors_8hh_a92a364c2b863dde1a024a77eac2a5b3b}{ANSI\_COLOR\_RESET}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00230}00230       \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00231}00231       retval=1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00232}00232       this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_abb0fc6333195ac9dd12f7fea78834b0f}{definition}}.\mbox{\hyperlink{class_p_i_x_i_e_1_1_experiment___definition_a4dafec217c0b9f571c8cc9e944e3f050}{GetChannel}}(crate, slot, chan)-\/>\mbox{\hyperlink{struct_p_i_x_i_e_1_1_experiment___definition_1_1_channel_ab4bc7928648f3bd401ff1327e6b86f9e}{alg}}-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_trace_1_1_algorithm_a03f21dc897a2dcd2a2391964756c9737}{dumpTrace}}(\&tempTrace[0], traceLen, nTraces, outPath, append, traceName+\textcolor{stringliteral}{"{}\_SuperTrace"{}});}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00233}00233     \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00234}00234 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00235}00235     fsetpos(this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a6d2bf732ff199ed45f260516507bf808}{file}}, \&pos);  \textcolor{comment}{//we were never even here}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00236}00236     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00237}00237     }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00238}00238   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00239}00239   }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00240}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a9d5674e7e9ffe3b69a9b262c7a2ac498}{00240}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a9d5674e7e9ffe3b69a9b262c7a2ac498}{Reader::set\_algorithm}}(\mbox{\hyperlink{class_p_i_x_i_e_1_1_trace_1_1_algorithm}{PIXIE::Trace::Algorithm}} *\&alg) \{}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00241}00241     this-\/>\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a421ed8ca4ba0264f9c1101fa21459057}{tracealg}} = alg;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00242}00242     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00243}00243   \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00244}00244 }
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00245}00245   \textcolor{keywordtype}{float} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a1b1a55edec38b1f82fcef3d45704ac18}{Reader::dither}};}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00246}\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a970d13d240d243425a28d4f0ab5fcf25}{00246}}   \textcolor{keywordtype}{float} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a970d13d240d243425a28d4f0ab5fcf25}{Reader::Dither}}() \{ \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a1b1a55edec38b1f82fcef3d45704ac18}{dither}} += 0.1; \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a1b1a55edec38b1f82fcef3d45704ac18}{dither}} >= 1.0) \{ \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a1b1a55edec38b1f82fcef3d45704ac18}{dither}} = 0.0; \} \textcolor{keywordflow}{return} \mbox{\hyperlink{class_p_i_x_i_e_1_1_reader_a1b1a55edec38b1f82fcef3d45704ac18}{dither}}; \}}
\DoxyCodeLine{\Hypertarget{reader_8cc_source_l00247}00247 \}\textcolor{comment}{//PIXIE}}

\end{DoxyCode}
